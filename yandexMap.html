<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<script type="text/javascript" name="ScriptYandexMapHelper">

function setMapSize()
{
    var map = document.getElementById('YMapsID');
    map.style.width = window.iYMapHelper.getMapWidth()+"px";
    map.style.height = window.iYMapHelper.getMapHeight()+"px";
}

(function()
{
    window.iYMapHelper =
    {
        size : {width:320,height:468},
        center : {lon:37.64,lat:55.76},
        zoom : 10,
		placeMark : [],
        
        getMapSize: function ()
        {
            return this.size;
        },
		
        setMapSize: function (size)
        {
            this.size = size;
			YMaps.jQuery("#YMapsID").css({
			width: size.width || "", 
			height: size.height || ""
			});
			window.iYMap.redraw();
			
			return "set Map size.width = "+size.width+" size.height = "+size.height;
        },       
        
        getMapHeight: function ()
        {
            return this.size.height;
        },
		
        setMapHeight: function (height)
        {
            this.size.height = height;
			var map = document.getElementById('YMapsID');
			map.style.height = height + "px";
			return "set Map height = "+map.style.height;
        },
        
        getMapWidth: function ()
        {
            return this.size.width;
        },
		
        setMapWidth: function (width)
        {
            this.size.width = width;
			var map = document.getElementById('YMapsID');
			map.style.width = width + "px";
			return "set Map width = "+map.style.width;
        },
		
		getMapCenter: function ()
		{
			return this.center;
		},
		
		setMapCenter: function (center)
		{
			this.center = center;
			window.iYMap.setCenter(new YMaps.GeoPoint(this.lon, this.lat), this.zoom);
			return "set Map center.lon = "+this.lon+ " center.lat = "+this.lat;
		},
		
		getMapScale: function ()
		{
			return this.scale;
		},
		
		setMapScalePlus: function ()
		{
			this.zoom ++;
			window.iYMap.setZoom(this.zoom);
			return "set Map scale = "+this.zoom;
		},
		
		setMapScaleMinus: function ()
		{
			this.zoom --;
			window.iYMap.setZoom(this.zoom);
			return "set Map scale = "+this.zoom;
		},
		
		scrollTo: function(x,y)
		{
			window.iYMap.setCenter(window.iYMap.converter.clientPixelsToCoordinates(new YMaps.Point(x, y)), this.zoom);
			return "scroll to x="+x+", y="+y;	
		},
		
		addPlaceMark: function(placePoint, placeName, placeDescription, placeID )
		{
			var placemark = new YMaps.Placemark(new YMaps.GeoPoint(placePoint.lon, placePoint.lat));
			placemark.name = placeName;
			if ( placeDescription && placeID && placeDescription != '(null)' && placeID != '(null)' )
			{
				placemark.setBalloonContent('<div>'+placeName+' <a href="iYandexMapLib_PlaceMarkID='+placeID+'">'+placeDescription+'</a></div>');
			}
			this.placeMark.push(placemark);
			window.iYMap.addOverlay(placemark);
			return "placemark";
		},
		
		clearPlaceMark: function ()
		{
			for (var i in this.placeMark)
			{
				var placemark = this.placeMark[i];
				window.iYMap.removeOverlay(placemark);
			}
			return "clearPlaceMark";
		},

    };
})();
</script>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="http://api-maps.yandex.ru/1.1/index.xml?key=ANpUFEkBAAAAf7jmJwMAHGZHrcKNDsbEqEVjEUtCmufxQMwAAAAAAAAAAAAvVrubVT4btztbduoIgTLAeFILaQ==" type="text/javascript"></script>
    <script type="text/javascript">
        YMaps.jQuery(function () {
            window.iYMap = new YMaps.Map(YMaps.jQuery("#YMapsID")[0]);
            window.iYMap.setCenter(new YMaps.GeoPoint(37.64, 55.76), 10);
			window.iYMap.redraw();
        })
    </script>
</head>

<body style="padding:0;margin:0;">
    <div id="YMapsID" style="width:320px;height:468px"></div>
</body>

</html>