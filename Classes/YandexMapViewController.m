////  YandexMapViewController.m//  YandexMap////  Created by Slava on 11/10/11.//  Copyright 2011 slavabuv@yandex.ru All rights reserved.//#import "YandexMapViewController.h"@implementation YandexMapViewController-(void)buttonAction:(id)sender{	UIButton * button = (UIButton *)sender;	if ([button.titleLabel.text isEqualToString:@"+"])	{		iYandexMapAnnotation *ann1 = [iYandexMapAnnotation new];		ann1.ID = @"1";		ann1.title = @"Meтка1";		ann1.subtitle = @"Подробнее";		CLLocationCoordinate2D pos;		pos.longitude = 37.600000;		pos.latitude = 55.760027;		ann1.coordinate = pos;				iYandexMapAnnotation *ann2 = [iYandexMapAnnotation new];		ann2.ID = @"2";		ann2.title = @"Meтка2";		CLLocationCoordinate2D pos2;		pos2.longitude = 37.650000;		pos2.latitude = 55.760027;		ann2.coordinate = pos2;				[_yandexMapView addAnnotations:[NSArray arrayWithObjects:ann1,ann2,nil]];				[ann1 release];		[ann2 release];		[button setTitle:@"-" forState:UIControlStateNormal];	}	else	{		[button setTitle:@"+" forState:UIControlStateNormal];		[_yandexMapView addAnnotations:nil];	}}- (void)viewDidLoad {    [super viewDidLoad];		_yandexMapView = [[YandexMapView alloc] initWithFrame:CGRectMake(0, 0, 320, 468) yandexAPIKey:@"ANpUFEkBAAAAf7jmJwMAHGZHrcKNDsbEqEVjEUtCmufxQMwAAAAAAAAAAAAvVrubVT4btztbduoIgTLAeFILaQ"];	[_yandexMapView setWriteLog:YES];	[_yandexMapView setDelegate:self];	[self.view addSubview:_yandexMapView];	//	_buttonAddPlace = [UIButton buttonWithType:UIButtonTypeRoundedRect];	[_buttonAddPlace setFrame:CGRectMake(10, 10, 30, 30)];	[_buttonAddPlace addTarget:self action:@selector(buttonAction:) forControlEvents:UIControlEventTouchUpInside];	[_buttonAddPlace setTitle:@"+" forState:UIControlStateNormal];	[self.view addSubview:_buttonAddPlace];}- (void)dealloc{	[_yandexMapView release];    [super dealloc];}- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{	if (UIInterfaceOrientationIsLandscape(interfaceOrientation))	{		[_yandexMapView setFrame:CGRectMake(0, 0, 480, 302)];	}	else	{		[_yandexMapView setFrame:CGRectMake(0, 0, 320, 468)];	}	return YES;}#pragma mark -#pragma mark iYandexMapAnnotationDelegate-(void)onAnnotationDetail:(iYandexMapAnnotation*)annotation{	UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Сообщение"													message:[NSString stringWithFormat:@"Подробное описание метки id=%@",annotation.ID]												   delegate:nil										  cancelButtonTitle:@"OK"										  otherButtonTitles:nil];	[alert show];	[alert release];}@end